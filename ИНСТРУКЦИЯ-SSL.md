# üîê –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –¥–ª—è alimkitaphane.ru

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `certbot` –≤ `docker-compose.yml`
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `nginx.conf` —Å HTTPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
3. ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `docker-compose.yml`
- `nginx.conf`
- `init-letsencrypt.sh`

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git pull
# –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ scp/ftp
```

### –®–∞–≥ 2: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å email

```bash
nano init-letsencrypt.sh
```

–ó–∞–º–µ–Ω–∏—Ç–µ:
```bash
email="your-email@example.com"
```
–Ω–∞ –≤–∞—à email:
```bash
email="admin@alimkitaphane.ru"
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x init-letsencrypt.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
./init-letsencrypt.sh
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
```bash
docker compose up -d certbot
```

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS:
- ‚úÖ `https://alimkitaphane.ru`
- ‚úÖ `https://www.alimkitaphane.ru`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
docker compose exec certbot certbot certificates

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPS
curl -I https://alimkitaphane.ru

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç
curl -I http://alimkitaphane.ru
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å:
1. DNS –∑–∞–ø–∏—Å–∏ `alimkitaphane.ru` –∏ `www.alimkitaphane.ru` —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
2. –ü–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ:
   ```bash
   sudo ufw allow 80
   sudo ufw allow 443
   ```
3. Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ (—Ç–æ–ª—å–∫–æ –≤ Docker)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏ certbot
docker compose logs certbot

# –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
docker compose run --rm certbot renew --dry-run

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞—Ç—É –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
docker compose exec certbot certbot certificates
```

## üîÑ –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—Ä—É—á–Ω—É—é:
```bash
docker compose run --rm certbot renew
docker compose exec nginx nginx -s reload
```

