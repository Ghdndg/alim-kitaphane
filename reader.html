<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0c" />
  <title>Хаджи Гирай</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="reader.css" />
</head>
<body data-theme="auto">
  <!-- Splash -->
  <div id="loading" class="loading" role="status" aria-live="polite">
    <div class="loading__box">
      <div class="loading__spinner" aria-hidden="true"></div>
      <div class="loading__title">Хаджи Гирай</div>
      <div class="loading__hint">Подготовка страниц…</div>
    </div>
  </div>

  <!-- Top bar -->
  <header class="topbar" id="topbar" role="banner">
    <button class="btn icon" id="btn-back" aria-label="Назад" title="Назад">
      <i class="ri-arrow-left-line" aria-hidden="true"></i>
    </button>
    <div class="topbar__title">
      <div id="book-title">Хаджи‑Гирай</div>
      <div id="book-author" class="muted">Алим Мидат</div>
    </div>
    <div class="topbar__actions">
      <button class="btn icon" id="btn-search" aria-label="Поиск" title="Поиск (Ctrl+F)">
        <i class="ri-search-line" aria-hidden="true"></i>
      </button>
      <button class="btn icon" id="btn-toc" aria-label="Оглавление" title="Оглавление (Ctrl+T)">
        <i class="ri-list-check-2" aria-hidden="true"></i>
      </button>
      <button class="btn icon" id="btn-bookmark" aria-label="Закладка" title="Закладка (Ctrl+B)">
        <i class="ri-bookmark-3-line" aria-hidden="true"></i>
      </button>
      <button class="btn icon" id="btn-settings" aria-label="Настройки" title="Настройки (S)">
        <i class="ri-settings-3-line" aria-hidden="true"></i>
      </button>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar" role="complementary" aria-label="Оглавление и заметки">
    <div class="sidebar__tabs" role="tablist">
      <button class="tab active" data-tab="toc" role="tab" aria-selected="true">Содержание</button>
      <button class="tab" data-tab="marks" role="tab" aria-selected="false">Закладки</button>
      <button class="tab" data-tab="notes" role="tab" aria-selected="false">Заметки</button>
    </div>
    <div class="sidebar__body">
      <section class="panel active" data-panel="toc" role="region">
        <div class="field">
          <i class="ri-search-2-line"></i>
          <input id="toc-search" type="text" placeholder="Поиск по главам…" aria-label="Поиск по оглавлению" />
        </div>
        <nav id="toc-list" class="toc"></nav>
      </section>
      <section class="panel" data-panel="marks" role="region">
        <div id="marks-list" class="list empty">Закладок пока нет</div>
      </section>
      <section class="panel" data-panel="notes" role="region">
        <div id="notes-list" class="list empty">Заметок пока нет</div>
      </section>
    </div>
  </aside>

  <!-- Reader surface -->
  <main class="surface" id="surface" role="main" aria-label="Область чтения">
    <!-- Page container with swipe paging -->
    <div class="pager" id="pager" aria-live="polite">
      <!-- Pages will be injected -->
    </div>

    <!-- Touch zones for premium UX: left/right tap to turn page, center to toggle UI -->
    <div class="tap-zones">
      <button class="zone zone--left" id="tap-left" aria-label="Назад"></button>
      <button class="zone zone--center" id="tap-center" aria-label="Показать/скрыть панели"></button>
      <button class="zone zone--right" id="tap-right" aria-label="Вперед"></button>
    </div>

    <!-- Floating controls -->
    <div class="floats">
      <div class="floats__progress">
        <div id="progress-text">1 из 100 • ~0 мин</div>
        <div class="progress" id="progress">
          <div class="progress__fill" id="progress-fill"></div>
        </div>
      </div>
      <div class="floats__nav">
        <button class="btn pill" id="btn-prev"><i class="ri-arrow-left-s-line"></i></button>
        <input class="page-input" id="goto" type="number" min="1" value="1" />
        <span id="total" class="muted">/ 100</span>
        <button class="btn pill" id="btn-next"><i class="ri-arrow-right-s-line"></i></button>
      </div>
    </div>
  </main>

  <!-- Overlays -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- Modals -->
  <dialog class="modal" id="modal-settings" aria-labelledby="mod-title-settings">
    <form method="dialog" class="modal__box">
      <header class="modal__header">
        <h3 id="mod-title-settings">Настройки</h3>
        <button class="btn icon" value="close" aria-label="Закрыть"><i class="ri-close-line"></i></button>
      </header>
      <div class="modal__body grid">
        <label class="field-label">Тема
          <div class="segmented">
            <button type="button" class="seg active" data-theme="auto">Авто</button>
            <button type="button" class="seg" data-theme="light">Светлая</button>
            <button type="button" class="seg" data-theme="dark">Тёмная</button>
            <button type="button" class="seg" data-theme="sepia">Сепия</button>
          </div>
        </label>
        <label class="field-label">Шрифт
          <div class="segmented">
            <button type="button" class="seg active" data-font="crimson">Crimson</button>
            <button type="button" class="seg" data-font="inter">Inter</button>
            <button type="button" class="seg" data-font="georgia">Georgia</button>
          </div>
        </label>
        <label class="field-label">Размер шрифта
          <input id="ctrl-size" type="range" min="14" max="28" value="18" />
        </label>
        <label class="field-label">Интерлиньяж
          <input id="ctrl-lh" type="range" min="1.4" max="2.2" step="0.05" value="1.7" />
        </label>
        <label class="field-label">Ширина текста
          <div class="segmented">
            <button type="button" class="seg" data-width="narrow">Узкая</button>
            <button type="button" class="seg active" data-width="medium">Средняя</button>
            <button type="button" class="seg" data-width="wide">Широкая</button>
          </div>
        </label>
        <label class="field-label">Режим
          <div class="segmented">
            <button type="button" class="seg active" data-mode="page">Страницы</button>
            <button type="button" class="seg" data-mode="scroll">Прокрутка</button>
          </div>
        </label>
      </div>
      <footer class="modal__footer">
        <button class="btn primary" value="close">Готово</button>
      </footer>
    </form>
  </dialog>

  <dialog class="modal" id="modal-search" aria-labelledby="mod-title-search">
    <form method="dialog" class="modal__box">
      <header class="modal__header">
        <h3 id="mod-title-search">Поиск по книге</h3>
        <button class="btn icon" value="close" aria-label="Закрыть"><i class="ri-close-line"></i></button>
      </header>
      <div class="modal__body">
        <div class="field">
          <i class="ri-search-2-line"></i>
          <input id="q" placeholder="Введите запрос…" />
          <button class="btn" id="do-search" type="button">Найти</button>
        </div>
        <div class="opts">
          <label><input type="checkbox" id="cs" /> С учетом регистра</label>
          <label><input type="checkbox" id="ww" /> Целые слова</label>
        </div>
        <div id="search-results" class="results"></div>
      </div>
      <footer class="modal__footer">
        <button class="btn" value="close">Закрыть</button>
      </footer>
    </form>
  </dialog>

  <!-- Icons (RemixIcon) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" />
  <script src="reader.js"></script>
</body>
</html>
